import { AppDataSource } from '../dataSource';
import { SystemUser } from '../models/SystemUser';

async function createInitialUsers() {
  const userRepository = AppDataSource.getRepository(SystemUser);
  await userRepository.save([
    { name: "Alice", email: "alice@example.com", role: "admin", password: "hashed_password" },
    { name: "Bob", email: "bob@example.com", role: "user", password: "hashed_password" }
  ]);
}

AppDataSource.initialize()
  .then(() => {
    console.log("Data Source has been initialized!");
    createInitialUsers().then(() => {
      console.log("Seeding completed!");
      AppDataSource.destroy();
    });
  })
  .catch((err) => {
    console.error("Error during Data Source initialization", err)
  });
